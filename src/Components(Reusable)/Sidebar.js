import React, { useState,useEffect } from 'react';
import './Sidebar.css';
import { useRef } from 'react';
import { useNavigate } from 'react-router-dom';
import { useLocation } from 'react-router-dom';

const items = [
  { id: 1, label: 'Dashboard', icon: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
	<path fill="currentColor" d="M6 19h3.692v-5.884h4.616V19H18v-9l-6-4.538L6 10zm-1 1V9.5l7-5.288L19 9.5V20h-5.692v-5.884h-2.616V20zm7-7.77" />
</svg> },
  { id: 2, label: 'Contact Center', icon: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
	<path fill="currentColor" d="M6.5 13.5h7v-1h-7zm0-3h11v-1h-11zm0-3h11v-1h-11zM3 20.077V4.616q0-.691.463-1.153T4.615 3h14.77q.69 0 1.152.463T21 4.616v10.769q0 .69-.463 1.153T19.385 17H6.077zM5.65 16h13.735q.23 0 .423-.192t.192-.423V4.615q0-.23-.192-.423T19.385 4H4.615q-.23 0-.423.192T4 4.615v13.03zM4 16V4z" />
</svg> },
  { id: 3, label: 'Analytics', icon: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
	<path fill="currentColor" d="M10 2c-.6 0-1 .4-1 1v18c0 .6.4 1 1 1s1-.4 1-1V3c0-.6-.4-1-1-1M5 12c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1s1-.4 1-1v-8c0-.6-.4-1-1-1m10-4c-.6 0-1 .4-1 1v12c0 .6.4 1 1 1s1-.4 1-1V9c0-.6-.4-1-1-1m5 8c-.6 0-1 .4-1 1v4c0 .6.4 1 1 1s1-.4 1-1v-4c0-.6-.4-1-1-1" />
</svg> },
  { id: 4, label: 'Chat Bot', icon: <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M10.625 1.875C10.625 1.70924 10.5592 1.55027 10.4419 1.43306C10.3247 1.31585 10.1658 1.25 10 1.25C9.83424 1.25 9.67527 1.31585 9.55806 1.43306C9.44085 1.55027 9.375 1.70924 9.375 1.875V2.5H6.875C6.37772 2.5 5.90081 2.69754 5.54917 3.04917C5.19754 3.40081 5 3.87772 5 4.375V8.125C5 8.62228 5.19754 9.09919 5.54917 9.45083C5.90081 9.80246 6.37772 10 6.875 10H13.125C13.6223 10 14.0992 9.80246 14.4508 9.45083C14.8025 9.09919 15 8.62228 15 8.125V4.375C15 3.87772 14.8025 3.40081 14.4508 3.04917C14.0992 2.69754 13.6223 2.5 13.125 2.5H10.625V1.875ZM6.25 4.375C6.25 4.20924 6.31585 4.05027 6.43306 3.93306C6.55027 3.81585 6.70924 3.75 6.875 3.75H13.125C13.2908 3.75 13.4497 3.81585 13.5669 3.93306C13.6842 4.05027 13.75 4.20924 13.75 4.375V8.125C13.75 8.29076 13.6842 8.44973 13.5669 8.56694C13.4497 8.68415 13.2908 8.75 13.125 8.75H6.875C6.70924 8.75 6.55027 8.68415 6.43306 8.56694C6.31585 8.44973 6.25 8.29076 6.25 8.125V4.375ZM5 13.75C5 13.5842 5.06585 13.4253 5.18306 13.3081C5.30027 13.1908 5.45924 13.125 5.625 13.125H14.375C14.5408 13.125 14.6997 13.1908 14.8169 13.3081C14.9342 13.4253 15 13.5842 15 13.75V14.1875C15 15.3713 14.4925 16.1575 13.6538 16.68C12.7775 17.2262 11.5037 17.5 10 17.5C8.50625 17.5 7.2325 17.2275 6.3525 16.68C5.51 16.1562 5 15.3688 5 14.1875V13.75ZM5.625 11.875C5.12772 11.875 4.65081 12.0725 4.29917 12.4242C3.94754 12.7758 3.75 13.2527 3.75 13.75V14.1875C3.75 15.8188 4.5 17 5.6925 17.7412C6.84875 18.46 8.3875 18.75 10 18.75C11.6213 18.75 13.16 18.4613 14.315 17.7412C15.5075 17 16.25 15.8163 16.25 14.1875V13.75C16.25 13.2527 16.0525 12.7758 15.7008 12.4242C15.3492 12.0725 14.8723 11.875 14.375 11.875H5.625ZM9.0625 6.25C9.0625 6.49864 8.96373 6.7371 8.78791 6.91291C8.6121 7.08873 8.37364 7.1875 8.125 7.1875C7.87636 7.1875 7.6379 7.08873 7.46209 6.91291C7.28627 6.7371 7.1875 6.49864 7.1875 6.25C7.1875 6.00136 7.28627 5.7629 7.46209 5.58709C7.6379 5.41127 7.87636 5.3125 8.125 5.3125C8.37364 5.3125 8.6121 5.41127 8.78791 5.58709C8.96373 5.7629 9.0625 6.00136 9.0625 6.25ZM11.875 7.1875C12.1236 7.1875 12.3621 7.08873 12.5379 6.91291C12.7137 6.7371 12.8125 6.49864 12.8125 6.25C12.8125 6.00136 12.7137 5.7629 12.5379 5.58709C12.3621 5.41127 12.1236 5.3125 11.875 5.3125C11.6264 5.3125 11.3879 5.41127 11.2121 5.58709C11.0363 5.7629 10.9375 6.00136 10.9375 6.25C10.9375 6.49864 11.0363 6.7371 11.2121 6.91291C11.3879 7.08873 11.6264 7.1875 11.875 7.1875Z" fill="#424242"/>
    </svg>
     },
  { id: 5, label: 'Team', icon: <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M10.0001 8.33332C10.8841 8.33332 11.732 7.98213 12.3571 7.35701C12.9822 6.73189 13.3334 5.88404 13.3334 4.99999C13.3334 4.11593 12.9822 3.26809 12.3571 2.64297C11.732 2.01785 10.8841 1.66666 10.0001 1.66666C9.11602 1.66666 8.26818 2.01785 7.64306 2.64297C7.01794 3.26809 6.66675 4.11593 6.66675 4.99999C6.66675 5.88404 7.01794 6.73189 7.64306 7.35701C8.26818 7.98213 9.11602 8.33332 10.0001 8.33332ZM4.58341 10.8333C5.13595 10.8333 5.66585 10.6138 6.05655 10.2231C6.44725 9.83243 6.66675 9.30252 6.66675 8.74999C6.66675 8.19745 6.44725 7.66755 6.05655 7.27685C5.66585 6.88615 5.13595 6.66666 4.58341 6.66666C4.03088 6.66666 3.50098 6.88615 3.11028 7.27685C2.71957 7.66755 2.50008 8.19745 2.50008 8.74999C2.50008 9.30252 2.71957 9.83243 3.11028 10.2231C3.50098 10.6138 4.03088 10.8333 4.58341 10.8333ZM17.5001 8.74999C17.5001 9.30252 17.2806 9.83243 16.8899 10.2231C16.4992 10.6138 15.9693 10.8333 15.4167 10.8333C14.8642 10.8333 14.3343 10.6138 13.9436 10.2231C13.5529 9.83243 13.3334 9.30252 13.3334 8.74999C13.3334 8.19745 13.5529 7.66755 13.9436 7.27685C14.3343 6.88615 14.8642 6.66666 15.4167 6.66666C15.9693 6.66666 16.4992 6.88615 16.8899 7.27685C17.2806 7.66755 17.5001 8.19745 17.5001 8.74999ZM10.0001 9.16666C11.1051 9.16666 12.165 9.60564 12.9464 10.387C13.7278 11.1684 14.1667 12.2283 14.1667 13.3333V18.3333H5.83341V13.3333C5.83341 12.2283 6.2724 11.1684 7.0538 10.387C7.8352 9.60564 8.89501 9.16666 10.0001 9.16666ZM4.16675 13.3333C4.16675 12.7558 4.25008 12.1983 4.40675 11.6717L4.26508 11.6833C3.55081 11.7617 2.89063 12.1011 2.41113 12.6362C1.93163 13.1714 1.66656 13.8648 1.66675 14.5833V18.3333H4.16675V13.3333ZM18.3334 18.3333V14.5833C18.3335 13.8403 18.05 13.1252 17.5408 12.5841C17.0316 12.043 16.3351 11.7167 15.5934 11.6717C15.7492 12.1983 15.8334 12.7558 15.8334 13.3333V18.3333H18.3334Z" fill="#424242"/>
    </svg>
     },
  { id: 6, label: 'Settings', icon: <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M10.2458 7.51211C9.73283 7.46145 9.21677 7.57057 8.76825 7.82454C8.31973 8.07851 7.96067 8.4649 7.74023 8.93082C7.51979 9.39673 7.44875 9.91939 7.53684 10.4272C7.62492 10.9351 7.86783 11.4033 8.23229 11.7678C8.59676 12.1322 9.06497 12.3751 9.57282 12.4632C10.0807 12.5513 10.6033 12.4803 11.0693 12.2598C11.5352 12.0394 11.9216 11.6803 12.1755 11.2318C12.4295 10.7833 12.5386 10.2672 12.488 9.7543C12.4302 9.17929 12.1754 8.64193 11.7668 8.23329C11.3581 7.82465 10.8208 7.56986 10.2458 7.51211ZM16.2653 10C16.2637 10.2717 16.2438 10.5431 16.2055 10.8121L17.9716 12.1973C18.0485 12.261 18.1003 12.35 18.1178 12.4483C18.1353 12.5466 18.1174 12.648 18.0673 12.7344L16.3966 15.625C16.3458 15.7106 16.2665 15.7754 16.1726 15.8082C16.0787 15.841 15.9762 15.8396 15.8833 15.8043L14.1294 15.098C14.0326 15.0595 13.9279 15.0456 13.8245 15.0576C13.721 15.0695 13.6222 15.1069 13.5368 15.1664C13.2691 15.3507 12.9878 15.5145 12.6954 15.6562C12.6034 15.7009 12.5239 15.7676 12.4638 15.8503C12.4037 15.933 12.3649 16.0292 12.3508 16.1305L12.088 18.0012C12.0707 18.1 12.0196 18.1897 11.9436 18.255C11.8675 18.3204 11.771 18.3573 11.6708 18.3594H8.32936C8.23075 18.3577 8.13565 18.3224 8.05975 18.2594C7.98384 18.1965 7.93166 18.1095 7.91179 18.0129L7.64929 16.1449C7.63454 16.0426 7.59474 15.9454 7.5334 15.8621C7.47207 15.7789 7.39111 15.712 7.29772 15.6676C7.0056 15.5266 6.72527 15.3624 6.45944 15.1766C6.37432 15.1173 6.27581 15.0802 6.17277 15.0686C6.06973 15.0569 5.96541 15.0711 5.86921 15.1098L4.11569 15.8156C4.02277 15.851 3.92033 15.8525 3.82644 15.8197C3.73254 15.787 3.65321 15.7222 3.60241 15.6367L1.93171 12.7461C1.88148 12.6597 1.86353 12.5583 1.88105 12.46C1.89858 12.3616 1.95044 12.2727 2.02741 12.209L3.51999 11.0371C3.60176 10.9722 3.66603 10.8879 3.70696 10.7918C3.74789 10.6958 3.76418 10.5911 3.75436 10.4871C3.7403 10.3242 3.73171 10.1617 3.73171 9.99883C3.73171 9.83594 3.73991 9.67578 3.75436 9.51641C3.76311 9.4131 3.74601 9.30924 3.70462 9.21418C3.66323 9.11912 3.59884 9.03585 3.51725 8.97187L2.02546 7.8C1.94974 7.73597 1.89897 7.64734 1.88204 7.54964C1.86511 7.45194 1.88311 7.35139 1.93288 7.26562L3.60358 4.375C3.65432 4.28945 3.73363 4.22455 3.82753 4.19175C3.92143 4.15895 4.02389 4.16035 4.11686 4.1957L5.87077 4.90195C5.96749 4.94046 6.07225 4.95438 6.17567 4.94245C6.27909 4.93052 6.37794 4.89311 6.46335 4.83359C6.73103 4.64927 7.0123 4.48552 7.30475 4.34375C7.3967 4.29906 7.47622 4.23242 7.53631 4.14972C7.5964 4.06701 7.6352 3.97078 7.64929 3.86953L7.91218 1.99883C7.92944 1.90003 7.98048 1.8103 8.05658 1.74496C8.13267 1.67963 8.22909 1.64275 8.32936 1.64062H11.6708C11.7694 1.64233 11.8645 1.67758 11.9404 1.74056C12.0163 1.80354 12.0685 1.8905 12.0883 1.98711L12.3508 3.85508C12.3656 3.95745 12.4054 4.05459 12.4667 4.13787C12.5281 4.22114 12.609 4.28798 12.7024 4.33242C12.9945 4.47338 13.2749 4.63758 13.5407 4.82344C13.6258 4.88266 13.7243 4.91978 13.8274 4.93144C13.9304 4.9431 14.0347 4.92894 14.1309 4.89023L15.8844 4.18438C15.9774 4.14899 16.0798 4.14753 16.1737 4.18026C16.2676 4.21299 16.3469 4.2778 16.3977 4.36328L18.0684 7.25391C18.1187 7.34027 18.1366 7.44165 18.1191 7.54001C18.1016 7.63837 18.0497 7.72732 17.9727 7.79102L16.4801 8.96289C16.398 9.02759 16.3334 9.1118 16.2921 9.20786C16.2508 9.30392 16.2342 9.40878 16.2438 9.51289C16.2567 9.67461 16.2653 9.83711 16.2653 10Z" stroke="#424242" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
     }
];


const Sidebar = () => {
  const [selectedId, setSelectedId] = useState(2); 
  const [isUserProfileOpen, setisUserProfileOpen] = useState(false);
  const handleUserProfileClick = () => {
    setisUserProfileOpen(prev => !prev);
  }
  const navigate=useNavigate();
const location = useLocation();
  useEffect(() => {
    const path = location.pathname;
    const id = items.find(item => {
      if (path.includes('/dashboard') && item.id === 1) return true;
      if (path.includes('/contactcenter') && item.id === 2) return true;
      if (path.includes('/analytics') && item.id === 3) return true;
      if (path.includes('/chatbot') && item.id === 4) return true;
      if (path.includes('/team') && item.id === 5) return true;
      if (path.includes('/UserProfile') && item.id === 6) return true;
      return false;
    });
    if (id) {
      setSelectedId(id.id);
    }
  }, [location.pathname]);  
  const dropdownRef = useRef(null);
  useEffect(() => {
    const handleClickOutside = (event) => {
      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {
        setisUserProfileOpen(false);
      }
    };

    document.addEventListener('mousedown', handleClickOutside);
    return () => document.removeEventListener('mousedown', handleClickOutside);
  }, []);
  return (
    
    <div className="sidebar">
        <div className="sidebar-header">
            <img src="./logo.png" alt="Logo" className="sidebar-logo" />
            </div>
      {items.map((item) => (
        <div
          key={item.id}
          className={`sidebar-item ${selectedId === item.id ? 'active' : ''}`}
          onClick={() => {
            setSelectedId(item.id)
            if (item.id === 1) {
                navigate('/dashboard');
                } else if (item.id === 2) {
                navigate('/contactcenter');
                } else if (item.id === 3) {
                navigate('/analytics');
                } else if (item.id === 4) {
                navigate('/chatbot');
                } else if (item.id === 5) {
                navigate('/team');
                } else if (item.id === 6) {
                navigate('/UserProfile');
                }
             
            
          
          
          }}
        >
          <span className="icon">{item.icon}</span>
          {selectedId === item.id && <span className="label">{item.label}</span>}
          
        </div>
      ))}
  <div className="sidebar-user-container" ref={dropdownRef}>
  <button className='sidebar-user-profile' onClick={handleUserProfileClick}>
    <img src="./UserProfile.png" alt="User" className="user-icon" />
  </button>

  {isUserProfileOpen && (
    <div className="user-profile-dropdown">
      <div className="user-profile-item"onClick={()=>{navigate('/UserProfile')}}>Profile</div>
     
      <div className="user-profile-item"onClick={()=>{navigate('/login')}}>Logout</div>
    </div>
  )}
</div>

    </div>
  );
};

export default Sidebar;
